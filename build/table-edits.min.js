!function(c){var e="tableedits",n={keyboard:!0,dblclick:!0,button:!0,cancelButton:!0,deleteButton:!0,buttonSelector:".edit",cancelSelector:".cancel",deleteSelector:".delete",maintainWidth:!0,dropdowns:{},edit:function(){},save:function(){},cancel:function(){},delete:function(){}};function i(t,i){this.element=t,this.options=c.extend({},n,i),this._defaults=n,this._name=e,this.init()}i.prototype={init:function(){this.editing=!1,this.options.dblclick&&c(this.element).css("cursor","pointer").bind("dblclick",this.toggle.bind(this)),this.options.button&&c(this.options.buttonSelector,this.element).bind("click",this.toggle.bind(this)),this.options.cancelButton&&c(this.options.cancelSelector,this.element).bind("click",this.cancel.bind(this)),this.options.deleteButton&&c(this.options.deleteSelector,this.element).bind("click",this.delete.bind(this))},toggle:function(t){t.preventDefault(),this.editing=!this.editing,this.editing?this.edit():this.save()},edit:function(){var s=this,d={};c("td[data-field]",this.element).each(function(){var t,i=c(this).data("field"),e=c(this).text(),n=c(this).width();if(d[i]=e,c(this).empty(),s.options.maintainWidth&&c(this).width(n),i in s.options.dropdowns){t=c("<select></select>");for(var o=0;o<s.options.dropdowns[i].length;o++)c("<option></option>").text(s.options.dropdowns[i][o]).appendTo(t);t.val(e).data("old-value",e).dblclick(s._captureEvent)}else t=c('<input type="text" />').val(e).data("old-value",e).dblclick(s._captureEvent);t.appendTo(this),s.options.keyboard&&t.keydown(s._captureKey.bind(s))}),this.options.edit.bind(this.element)(d)},save:function(){this.editing=!1;var i={};c("td[data-field]",this.element).each(function(){var t=c(":input",this).val();i[c(this).data("field")]=t,c(this).empty().text(t)}),this.options.save.bind(this.element)(i)},cancel:function(){this.editing=!1;var i={};c("td[data-field]",this.element).each(function(){var t=c(":input",this).data("old-value");i[c(this).data("field")]=t,c(this).empty().text(t)}),this.options.cancel.bind(this.element)(i)},delete:function(){this.editing&&this.cancel(),this.options.delete.bind(this.element)()},_captureEvent:function(t){t.stopPropagation()},_captureKey:function(t){13===t.which?this.save():27===t.which&&this.cancel()}},c.fn[e]=function(t){return this.each(function(){c.data(this,"plugin_"+e)||c.data(this,"plugin_"+e,new i(this,t))})}}(jQuery,(window,document));